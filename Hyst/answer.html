
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>试卷答案解析部分</title>
<link href="http://api.yuliao.hujiang.com/Content/jbox/blue/jbox.css" rel="stylesheet" type="text/css" />
<link href="css/style0.css" rel="stylesheet" type="text/css" />
<style>
.head { background:url(img/head_banner.png) no-repeat center;height:290px; position:relative; width:100%}
</style>
</head>
<body>
    <form name="ctl01" method="post" action="lesson_unit_test_solution.aspx" id="ctl01">
<div>
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUJNjcyODI5OTE4ZGTsPaamuEy1YP/f1OlTLpmNDpB1dg==" />
</div>

    <div id="wrapper">
		<div class="head"></div>
        <div id="container">
			 <div id="navbar">
	
			</div>
            <div id="main">
				<div id="loading" style="text-align: center;"><img src='http://res.c.hjfile.cn/images/ajax-loader.gif' /></div>
			 </div>
        </div>
    </div>
    <input name="key" type="hidden" id="key" value="{&quot;ClassID&quot;:138195,&quot;LessonID&quot;:168372,&quot;BookID&quot;:50223,&quot;UnitID&quot;:2,&quot;Time&quot;:570325}" />
    <input name="answers" type="hidden" id="answers" value="[{&quot;QuestionID&quot;:46615,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;1&quot;},{&quot;QuestionID&quot;:46616,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;2&quot;},{&quot;QuestionID&quot;:46617,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;2&quot;},{&quot;QuestionID&quot;:46618,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;1&quot;},{&quot;QuestionID&quot;:46619,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;4&quot;},{&quot;QuestionID&quot;:46620,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;3&quot;},{&quot;QuestionID&quot;:46621,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;2&quot;},{&quot;QuestionID&quot;:46622,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;1&quot;},{&quot;QuestionID&quot;:46623,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;3&quot;},{&quot;QuestionID&quot;:46624,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;2&quot;},{&quot;QuestionID&quot;:46625,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;2&quot;},{&quot;QuestionID&quot;:46626,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;3&quot;},{&quot;QuestionID&quot;:46627,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;3&quot;},{&quot;QuestionID&quot;:46628,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;4&quot;},{&quot;QuestionID&quot;:46629,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;3&quot;},{&quot;QuestionID&quot;:46630,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;3&quot;},{&quot;QuestionID&quot;:46631,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;3&quot;},{&quot;QuestionID&quot;:46632,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;1&quot;},{&quot;QuestionID&quot;:46633,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;3&quot;},{&quot;QuestionID&quot;:46634,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:1,&quot;ModuleName&quot;:&quot;听力&quot;,&quot;Answer&quot;:&quot;3&quot;},{&quot;QuestionID&quot;:46635,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:2,&quot;ModuleName&quot;:&quot;选择&quot;,&quot;Answer&quot;:&quot;1&quot;},{&quot;QuestionID&quot;:46636,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:2,&quot;ModuleName&quot;:&quot;选择&quot;,&quot;Answer&quot;:&quot;1&quot;},{&quot;QuestionID&quot;:46637,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:2,&quot;ModuleName&quot;:&quot;选择&quot;,&quot;Answer&quot;:&quot;4&quot;},{&quot;QuestionID&quot;:46638,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:2,&quot;ModuleName&quot;:&quot;选择&quot;,&quot;Answer&quot;:&quot;2&quot;},{&quot;QuestionID&quot;:46639,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:2,&quot;ModuleName&quot;:&quot;选择&quot;,&quot;Answer&quot;:&quot;4&quot;},{&quot;QuestionID&quot;:46640,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:2,&quot;ModuleName&quot;:&quot;选择&quot;,&quot;Answer&quot;:&quot;3&quot;},{&quot;QuestionID&quot;:46641,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:2,&quot;ModuleName&quot;:&quot;选择&quot;,&quot;Answer&quot;:&quot;1&quot;},{&quot;QuestionID&quot;:46642,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:2,&quot;ModuleName&quot;:&quot;选择&quot;,&quot;Answer&quot;:&quot;2&quot;},{&quot;QuestionID&quot;:46643,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:2,&quot;ModuleName&quot;:&quot;选择&quot;,&quot;Answer&quot;:&quot;2&quot;},{&quot;QuestionID&quot;:46644,&quot;GroupID&quot;:0,&quot;ModuleID&quot;:2,&quot;ModuleName&quot;:&quot;选择&quot;,&quot;Answer&quot;:&quot;2&quot;}]" />
    </form>
</body>
</html>
<script src="http://api.yuliao.hujiang.com/Scripts/jquery-1.8.2.min.js" type="text/javascript"> </script>
<script src="http://api.yuliao.hujiang.com/Scripts/jQuery.tmpl.min.js" type="text/javascript"></script>
<script src="http://api.yuliao.hujiang.com/Scripts/json2.min.js" type="text/javascript"></script>
<script src="http://res.c.hjfile.cn/js/gotop.js" type="text/javascript"></script>
<script type="text/javascript" src="http://common.hjfile.cn/analytics/site/class.js"></script>
<script type="text/javascript">

    function getQuestions(begin, end) {
        return this.data.Questions.slice(begin - 1, end);
    }

	function getErrorQuestions(answers) {
		return $.map(this.data.Questions,function(q){ if(!isAnswerCorrect(answers[q.GroupID + '_' + q.QuestionID],q.Answer)) return q; });
	}
	
    function getOptions(item) {
        return item.split('|');
    }
	
	function getOptionByIndex(item, index) {
        return item.split('|')[index];
    }
	
	function getAnswer() {
        return this.data.Answer.split('///').join(', ');
    }
	
	function isAnswerCorrect(item, answer) {
		return answer ? $.inArray(item,answer.split('///')) >= 0 : false;
    }
	
	function formatContext(item) {
		if(item) 
		{
			item = item.replace(/\r/g,"");
			item = item.replace(/\[u\]([\w\W]*?)\[\/u\]/ig,"<u>$1</u>");
			item = item.replace(/\[b\]([\w\W]*?)\[\/b\]/ig,"<b>$1</b>");
			item = item.replace(/\[i\]([\w\W]*?)\[\/i\]/ig, "<i>$1</i>");
			return item;
		}
		return "";
	}
	
	function initData(data, answers) {
		var c=0;
		var w=0;
		$.each(data.Questions, function(i,q){ 
			if(q.QuestionType == 7 || q.QuestionType == 8)
			{
				$.each(q.Children, function(j, child) {
					var id = child.GroupID + '_' + child.QuestionID;
					if(isAnswerCorrect(answers[id], child.Answer)){c++;} else {w++;}
				});
			}
			else {
				if(isAnswerCorrect(answers[q.GroupID + '_' + q.QuestionID], q.Answer)){c++;} else {w++;}
			}
		});
		$('#questionsTmpl_navbar').tmpl({correct:c, wrong : w}).appendTo('#navbar');
	}
	
	function reviewWrong()
	{
		var answers = $("#main").data("answers");
		var data = $("#main").data("data");
		var ndata = $.map(data.Questions,function(q){ if(q.QuestionType != 7 && q.QuestionType != 8 && !isAnswerCorrect(answers[q.GroupID + '_' + q.QuestionID],q.Answer)) return q; });
		$("#navbar").empty();
		$("#main").empty();
		$("#error_questionsTmpl_navbar").tmpl({count:ndata.length}).appendTo("#navbar");
		$("#error_questionsTmpl").tmpl({ Questions:ndata},{ state: { activeIndex: 0 }}).appendTo("#main");
	}
	
	function closeReview()
	{
		var answers = $("#main").data("answers");
		var data = $("#main").data("data");
		$("#navbar").empty();
		$("#main").empty();
		initData(data, answers);
		$("#questionsTmpl").tmpl(data,{ state: { activeIndex: 0 }, answers : answers }).appendTo("#main");
	}
	
	$(function(){
		var key = JSON.parse($("#key").val());
		var answers = {}
		$.each(JSON.parse($("#answers").val()),function(i,o){
			answers[o.GroupID + '_' + o.QuestionID] = o.Answer;
		});
		$.getJSON("http://api.yuliao.hujiang.com/tk/GetUnitQuestionsWithSolution2/" + key.BookID + "/" + key.UnitID + "/jsonp?callback=?", null, function (data) {
				initData(data, answers);
				$("#main").data("data",data);
		        $("#questionsTmpl").tmpl(data,{ state: { activeIndex: 0 }, answers : answers }).appendTo("#main");
				$("#loading").hide();
        });
		$("#main").data("key",key);
		$("#main").data("answers",answers);
		$( "#main" ).delegate( ".viewModules a", "click", function() {
			var tmplItem = $.tmplItem(this);
			tmplItem.state.activeIndex = $(this).index();
			tmplItem.update();
		    return false;
		});
		
		$("#main").delegate(".title .module_cbtn a", "click", function () {
            var tmplItem = $.tmplItem(this);
			if($(this).hasClass("limit")) return;
            tmplItem.state.activeIndex += parseInt($(this).attr("action"));
			$('#navbar .info em:eq(0)').text(tmplItem.state.activeIndex + 1);
			tmplItem.update();
			return false;
        });
		
		$("#main").delegate(".previewQuestion .options input", "click", function () {
            $("#main .previewQuestion .options li").eq(parseInt($('#main .previewQuestion .options').attr('data-res')) - 1).addClass('correct');
            $("#main .previewQuestion .question_sln").removeClass('hide');
        });
		
		$("#main").delegate(".previewQuestion .answers input", "blur", function () {
            $("#main .previewQuestion .answers li span").text(' 正确答案：' + $('#main .previewQuestion .answers').attr('data-res').split('///').join(', '));
            $("#main .previewQuestion .question_sln").removeClass('hide');
		});
	    
		$("#main").delegate(".question_audio div", "click", function () {
		    $(this).html($("#questionsTmplAudio").tmpl($("img", this).attr("data-audio")));
		    return false;
		});
	    
		$(window).scroll(
			function () {
			  if ($(window).scrollTop() > $("#main").offset().top) {
				$("#container").addClass('sticky');
			  }
			  else {
				$("#container").removeClass('sticky');
			  }
			}
		);
	});
	
	
</script>
<script type="text/x-jquery-tmpl" id="questionsTmpl">
	{{wrap($data, {state: $item.state}) "#questionsWrap"}}
		{{each(i,module) Modules}}
			<span>${module.ModuleName}</span>
			<div class="previewQuestions" id="question_preview">
				{{each getQuestions(module.IndexStart, module.IndexEnd)}}
					{{if QuestionType == 7 || QuestionType == 8}}
					<div class="previewQuestion">
					{{else}}
					<div class="previewQuestion ${isAnswerCorrect($item.answers[GroupID + '_' + QuestionID], Answer) ? 'correct':'error' }">
					{{/if}}
					  <div class="question_index">${$index + 1}.</div>
					  <div class="question_correct"></div>
					  <pre class="question_cxt">{{html formatContext(Context)}}</pre>
                      {{if ContextImage}}
						<div><img class="question_image" src="${ContextImage}" alt=""/></div>
					  {{/if}}
					  {{if ContextAudio}}
						<div class="question_audio"><div class="fl"><img src="http://res.c.hjfile.cn/images/ico_audio.gif" data-audio="${ContextAudio}" alt=""/></div><div class="clear"></div></div>
					  {{/if}}
					  {{if QuestionType == 1}}
							{{tmpl($value, {answers : $item.answers}) "#questionsTmplChoice"}}
					  {{else QuestionType == 2}}
							{{tmpl($value, {answers : $item.answers}) "#questionsTmplBlank"}}
					  {{else QuestionType == 7 || QuestionType == 8}}
							{{tmpl(Children, {answers : $item.answers}) "#questionsTmplReading"}}
					  {{/if}}
					  <pre class="question_sln">{{html Solution}}</pre>
					</div>
					<div class="hr"></div>
				{{/each}}
				
				
				
			</div>
		{{/each}}
	{{/wrap}}
</script>

<script type="text/x-jquery-tmpl" id="questionsWrap" >
	<div class="title">
		<h2>初级水平测试</h2>
	</div>
	<div class="viewModules ${$item.html('span', true).length === 1 ? 'hide' : ''}">
		{{each $item.html("span", true)}}
			<a href='javascript:;' class='${$index === $item.state.activeIndex ? "on": ""}'><span>${$value}</span></a>
		{{/each}}
	</div>
	{{html $item.html("div")[$item.state.activeIndex]}}
	<div class="title">
	   	<p class="module_cbtn">
			<a href="javascript:" class='${$item.state.activeIndex === 0 ? "limit": ""}' action="-1">上一部分</a>
			<a href="javascript:" class='${$item.state.activeIndex === (Modules.length - 1) ? "limit": ""}' action="1">下一部分</a>
        </p> 	
	</div>
	<div class="tjkc">
		<h3>推荐课程</h3>
	</div>
	<div class="fm"> 
		<a class="fm1" href="#"></a>
		<a class="fm2" href="#"></a>
	</div>
</script>

<script type="text/x-jquery-tmpl" id="questionsTmplChoice" >
	<ul class="options">
	{{each getOptions(Options)}}
		<li class="${ $item.answers[GroupID + '_' + QuestionID] == Answer ?  '' :  Answer == $index+1 ? 'correct':'' }">
			<label><input type="radio" name="${QuestionID}" value="${$index+1}" ${ ($index+1) == $item.answers[GroupID + '_' + QuestionID] ? "checked='checked'" : ""}>&nbsp;${$value}</label>
			{{if getOptionByIndex(OptionsImage, $index)}}
				<div><img class="question_image" src="${getOptionByIndex(OptionsImage, $index)}" /></div>
			{{/if}}
			{{if getOptionByIndex(OptionsAudio, $index)}}
				<div class="question_audio"><div class="fl"><img src="http://res.c.hjfile.cn/images/ico_audio.gif" data-audio="${getOptionByIndex(OptionsAudio, $index)}" alt=""/></div><div class="clear"></div></div>
			{{/if}}
		</li>
	{{/each}}
	</ul>
</script>
<script type="text/x-jquery-tmpl" id="questionsTmplBlank">
	<ul class="answers">
		{{if isAnswerCorrect($item.answers[GroupID + '_' + QuestionID], Answer) }}
		<li>答案：${$item.answers[GroupID + '_' + QuestionID]}</li>
		{{else}}
		<li><span>你的答案：${$item.answers[GroupID + '_' + QuestionID]}</span>&nbsp;&nbsp;&nbsp;&nbsp;<span style='color:#339A18'>正确答案：${ getAnswer() }</span></li>
		{{/if}}
	</ul> 
</script>
<script type="text/x-jquery-tmpl" id="questionsTmplReading">
	<div class="previewQuestion ${ isAnswerCorrect($item.answers[GroupID + '_' + QuestionID], Answer) ? 'correct':'error' }">
	  <div class="question_index">${QuestionIndex})</div>
	  <div class="question_correct"></div>
	  <pre class="question_cxt">{{html formatContext(Context)}}</pre>
	  {{if ContextImage}}
		<div><img class="question_image" src="${ContextImage}" alt=""/></div>
	  {{/if}}
	  {{if ContextAudio}}
		<div class="question_audio"><div class="fl"><img src="http://res.c.hjfile.cn/images/ico_audio.gif" data-audio="${ContextAudio}" alt=""/></div><div class="clear"></div></div>
	  {{/if}}
	  {{if QuestionType == 1}}
			{{tmpl($data, {answers : $item.answers}) "#questionsTmplChoice"}}
	  {{/if}}
	  <pre class="question_sln">{{html Solution}}</pre>
	</div>
	<div class="hr"></div>
</script>
<script type="text/x-jquery-tmpl" id="questionsTmpl_navbar">
	<div class="navbar_container">
		<span class="ctrl"><a href="javascript:" onclick="reviewWrong();return false;">重新答题</a></span>
		<span class="time">答案和解析</span>
		<span class="info">您答对了<em>${correct}</em>题&nbsp;/&nbsp;答错<em>${wrong}</em>题</span>
	</div>
	<div class="clear"></div>
</script>


<script type="text/x-jquery-tmpl" id="error_questionsTmpl">
{{wrap($data,{state : $item.state}) "#error_questionsWrap"}}
	{{each Questions}}
		<div class="previewQuestion" id="question_${QuestionID}">
			<div class="question_index">${$index + 1}.</div>
			<pre class="question_cxt">{{html formatContext(Context)}}</pre>
            {{if ContextImage}}
			    <div><img class="question_image" src="${ContextImage}" /></div>
			{{/if}}
			{{if ContextAudio}}
				<div class="question_audio"><div class="fl"><img src="http://res.c.hjfile.cn/images/ico_audio.gif" data-audio="${ContextAudio}" alt=""/></div><div class="clear"></div></div>
			{{/if}}
			{{if QuestionType == 1}}
				{{tmpl($value, null) "#error_questionsTmplChoice"}}
			{{else QuestionType == 2}}
				{{tmpl($value, null) "#error_questionsTmplBlank"}}
			{{/if}}
			<pre class="question_sln hide">{{html Solution}}</pre>
		</div>
	{{/each}}
{{/wrap}}
</script>
<script type="text/x-jquery-tmpl" id="error_questionsWrap" >
	<div class="previewQuestions" id="question_preview">
		{{html $item.html("div")[$item.state.activeIndex]}}
	</div>
	<div class="title">
	     <p class="module_cbtn">
            <a href="javascript:" class='${$item.state.activeIndex === 0 ? "limit": ""}' action="-1">上一题</a>
            <a href="javascript:" class='${$item.state.activeIndex === (Questions.length - 1) ? "limit": ""}' action="1">下一题</a>
        </p>
	</div>
</script>
<script type="text/x-jquery-tmpl" id="error_questionsTmplChoice">
	<ul class="options" data-res='${Answer}'>
	{{each getOptions(Options)}}
		<li>
			<label><input type="radio" name="${QuestionID}" value="${$index+1}">&nbsp;${$value}</label>
			{{if getOptionByIndex(OptionsImage, $index)}}
				<div><img class="question_image" src="${getOptionByIndex(OptionsImage, $index)}" /></div>
			{{/if}}
			{{if getOptionByIndex(OptionsAudio, $index)}}
				<div class="question_audio"><div class="fl"><img src="http://res.c.hjfile.cn/images/ico_audio.gif" data-audio="${getOptionByIndex(OptionsAudio, $index)}" alt=""/></div><div class="clear"></div></div>
			{{/if}}
		</li>
	{{/each}}
	</ul>
</script>
<script type="text/x-jquery-tmpl" id="error_questionsTmplBlank">
	<ul class="answers" data-res='${Answer}'>
		<li>答案：<input type="text" name="${QuestionID}"/><span style='color:#339A18'></span></li>
	</ul> 
</script>


<script type="text/x-jquery-tmpl" id="error_questionsTmpl_navbar">
	<div class="navbar_container">
		<span class="ctrl"><a href="javascript:" onclick="closeReview();return false;">结束复习</a></span>
		<span class="time">错题复习</span>
		<span class="info">第<em>1</em>题&nbsp;/&nbsp;共<em>${count}</em>题</span>
	</div>
	<div class="clear"></div>
</script>
<script type="text/x-jquery-tmpl" id="questionsTmplAudio">
	<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,22,0" width="200" height="20" align="absmiddle">
	<param name="allowScriptAccess" value="always">
	<param name="movie" value="http://bulo.hujiang.com/musicbox/players/singlemp3player/singlemp3player.swf">
	<param name="quality" value="high"><param name="scale" value="noscale">
	<param name="wmode" value="transparent">
	<param name="FlashVars" value="file=${$data}&amp;backColor=FFFFFF&amp;frontColor=000000&amp;autoStart=true&amp;showDownload=false&amp;width=200&amp;height=20">
	<embed src="http://bulo.hujiang.com/musicbox/players/singlemp3player/singlemp3player.swf" quality="high" scale="noscale" wmode="transparent" bgcolor="#eeeeee" width="200" height="20" align="absmiddle" allowscriptaccess="always" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="file=${$data}&amp;backColor=FFFFFF&amp;frontColor=000000&amp;autoStart=true&amp;showDownload=false&amp;width=200&amp;height=20">
	</object>
</script>